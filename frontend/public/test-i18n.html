<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>i18n 測試頁面</title>
  <link rel="stylesheet" href="/assets/styles.css">
  <script src="/assets/i18n.js"></script>
  <script src="/assets/api-helper.js"></script>
</head>
<body class="gradient-bg min-h-screen text-white p-8">
  <div class="container mx-auto">
    <h1 class="text-3xl font-bold mb-6" data-i18n="platformTitle">文化探索平台</h1>
    
    <div class="bg-gray-900 bg-opacity-80 p-6 rounded-xl border border-gray-700 mb-6">
      <h2 class="text-xl font-bold text-gold-300 mb-4">語言切換測試</h2>
      <div class="flex gap-4 mb-4">
        <button id="switchZh" class="px-4 py-2 bg-gold-600 text-black rounded">中文</button>
        <button id="switchEn" class="px-4 py-2 bg-gray-700 text-white rounded">English</button>
      </div>
      <p>當前語言：<span id="currentLang" class="text-gold-400"></span></p>
    </div>

    <div class="bg-gray-900 bg-opacity-80 p-6 rounded-xl border border-gray-700 mb-6">
      <h2 class="text-xl font-bold text-gold-300 mb-4">翻譯測試</h2>
      <ul class="space-y-2">
        <li><span data-i18n="forum">論壇</span></li>
        <li><span data-i18n="settings">設定</span></li>
        <li><span data-i18n="gameSelection">遊戲選擇</span></li>
        <li><span data-i18n="score">分數</span></li>
        <li><span data-i18n="loading">載入中</span></li>
      </ul>
    </div>

    <div class="bg-gray-900 bg-opacity-80 p-6 rounded-xl border border-gray-700 mb-6">
      <h2 class="text-xl font-bold text-gold-300 mb-4">Placeholder 翻譯測試</h2>
      <input 
        type="text" 
        data-i18n-placeholder="inputMessage"
        placeholder="輸入你的訊息..." 
        class="w-full p-3 bg-gray-800 text-white rounded-lg border border-gray-600"
      />
    </div>

    <div class="bg-gray-900 bg-opacity-80 p-6 rounded-xl border border-gray-700">
      <h2 class="text-xl font-bold text-gold-300 mb-4">API Helper 測試</h2>
      <button id="testApi" class="px-4 py-2 bg-gold-600 text-black rounded mb-4">測試API請求</button>
      <div id="apiResult" class="bg-gray-800 p-4 rounded"></div>
    </div>
  </div>

  <script>
    // 等待i18n加載完成
    setTimeout(() => {
      updateCurrentLang();
    }, 500);

    function updateCurrentLang() {
      const lang = window.apiHelper.getCurrentLanguage();
      document.getElementById('currentLang').textContent = lang === 'zh' ? '繁體中文' : 'English';
    }

    document.getElementById('switchZh').addEventListener('click', () => {
      window.i18next.changeLanguage('zh');
      updateCurrentLang();
    });

    document.getElementById('switchEn').addEventListener('click', () => {
      window.i18next.changeLanguage('en');
      updateCurrentLang();
    });

    document.getElementById('testApi').addEventListener('click', async () => {
      const resultDiv = document.getElementById('apiResult');
      resultDiv.textContent = '發送請求中...';
      
      try {
        // 測試API請求會自動附帶語言參數
        const testData = {
          gameId: 'mcq',
          theme: '中華文化',
          params: { numQuestions: 1 }
        };
        
        resultDiv.textContent = `請求數據: ${JSON.stringify(testData, null, 2)}\n\n當前語言: ${window.apiHelper.getCurrentLanguage()}`;
      } catch (error) {
        resultDiv.textContent = `錯誤: ${error.message}`;
      }
    });
  </script>
</body>
</html>
