<!doctype html>
<html lang="zh-TW">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ–‡åŒ–æ¢ç´¢ â€” éŠæˆ²é¸æ“‡</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            gold: {
              300: '#ffd700',
              400: '#ffed4e',
              600: '#daa520',
              700: '#b8860b'
            }
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="/assets/gold-theme.css">
  <link rel="stylesheet" href="/assets/styles.css">
  <script src="/assets/i18n.js"></script>
  <script src="/assets/auth.js"></script>
  <script src="/assets/auth-modal.js"></script>
  <script src="/assets/login-prompt.js"></script>
  <script src="/assets/api-helper.js"></script>
  <script src="/assets/load-header.js"></script>
</head>
<body class="gradient-bg min-h-screen text-white">
  <!-- Header -->
  <header></header>

  <main class="container mx-auto p-6">
  <button onclick="window.location.href='/culture-selection.html'" class="mb-4 px-3 py-2 bg-gray-700 rounded text-body-sm" data-i18n="backToHome">è¿”å›</button>
    <h1 class="text-title-lg font-bold text-gold-300 mb-6" data-i18n="gameSelection">éŠæˆ²é¸æ“‡ (Demo)</h1>
    <div id="selectedTheme" class="text-gray-300 text-body mb-6"></div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      <div class="game-option card-hover bg-gray-900 bg-opacity-80 p-6 rounded-xl border border-gray-700" data-game="mcq">
        <div class="text-center"><div class="emoji-lg mb-4">â“</div><h3 class="text-title font-bold text-gold-300 mb-2" data-i18n="mcqGame">å•ç­”éŠæˆ²</h3></div>
      </div>
      <div class="game-option card-hover bg-gray-900 bg-opacity-80 p-6 rounded-xl border border-gray-700" data-game="matching">
        <div class="text-center"><div class="emoji-lg mb-4">ğŸ”—</div><h3 class="text-title font-bold text-gold-300 mb-2" data-i18n="matchingGame">é…å°éŠæˆ²</h3></div>
      </div>
      <div class="game-option card-hover bg-gray-900 bg-opacity-80 p-6 rounded-xl border border-gray-700" data-game="roleplay">
        <div class="text-center"><div class="emoji-lg mb-4">ğŸ­</div><h3 class="text-title font-bold text-gold-300 mb-2" data-i18n="roleplayGame">è§’è‰²æ‰®æ¼”</h3></div>
      </div>
      <div class="game-option card-hover bg-gray-900 bg-opacity-80 p-6 rounded-xl border border-gray-700" data-game="story">
        <div class="text-center"><div class="emoji-lg mb-4">ğŸ“–</div><h3 class="text-title font-bold text-gold-300 mb-2" data-i18n="storyGame">æ•…äº‹æ¢ç´¢</h3></div>
      </div>
    </div>

  </main>

  <script>
    function setupGameSelection() {
      const theme = localStorage.getItem('selectedTheme') || window.i18next.t('notSelected');
      const selectedThemeText = window.i18next.t('selectedTheme');
      document.getElementById('selectedTheme').textContent = selectedThemeText + 'ï¼š' + theme;

      document.querySelectorAll('.game-option').forEach(el => {
        el.addEventListener('click', () => {
          const game = el.dataset.game;
          localStorage.setItem('selectedGame', game);
          
          // æ ¹æ“šéŠæˆ²é¡å‹å°å‘ä¸åŒé é¢ï¼ˆæ–°è·¯å¾‘ï¼‰ï¼Œä¸¦å‚³éä¸»é¡Œåƒæ•¸
          const themeParam = theme !== 'æœªé¸æ“‡' ? `?theme=${encodeURIComponent(theme)}` : '';
          if (game === 'mcq') {
            window.location.href = `/game/mcq-game.html${themeParam}`;
          } else if (game === 'matching') {
            window.location.href = `/game/matching-game.html${themeParam}`;
          } else if (game === 'roleplay') {
            window.location.href = `/game/roleplay-game.html${themeParam}`;
          } else if (game === 'story') {
            window.location.href = `/game/story-game.html${themeParam}`;
          } else {
            window.location.href = `/game/game-detail.html${themeParam}`;
          }
        });
      });
    }

    if (window.i18next) {
      setupGameSelection();
    } else {
      // Wait for i18next to load
      const checkI18n = setInterval(() => {
        if (window.i18next) {
          clearInterval(checkI18n);
          setupGameSelection();
        }
      }, 100);
    }
  </script>
</body>
</html>